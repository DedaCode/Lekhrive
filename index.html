<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lekhrive - Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„Ø£Ù…Ø·Ø§Ø± ÙÙŠ Ù…ÙˆØ±ÙŠØªØ§Ù†ÙŠØ§</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700&display=swap');
        
        body {
            font-family: 'Tajawal', sans-serif;
            background-color: #f0f9ff;
        }
        
        .rain-intensity-light {
            background-color: #e0f2fe;
            border-left: 4px solid #38bdf8;
        }
        
        .rain-intensity-moderate {
            background-color: #bae6fd;
            border-left: 4px solid #0ea5e9;
        }
        
        .rain-intensity-heavy {
            background-color: #7dd3fc;
            border-left: 4px solid #0369a1;
        }
        
        .tab-active {
            border-bottom: 3px solid #0369a1;
            color: #0369a1;
            font-weight: bold;
        }
        
        /* For LTR elements like numbers */
        .ltr {
            direction: ltr;
            unicode-bidi: embed;
        }
        
        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }
        
        ::-webkit-scrollbar-thumb {
            background: #0369a1;
            border-radius: 4px;
        }
        
        /* Animation for rain entries */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .rain-entry {
            animation: fadeIn 0.3s ease-out forwards;
        }
    </style>
</head>
<body class="min-h-screen">
    <div class="container mx-auto px-4 py-8">
        <!-- Header -->
        <header class="mb-8 text-center">
            <h1 class="text-3xl md:text-4xl font-bold text-blue-900 mb-2">ğŸŒ§ï¸ Lekhrive</h1>
            <p class="text-lg text-blue-700">Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„Ø£Ù…Ø·Ø§Ø± ÙÙŠ Ù…Ø®ØªÙ„Ù ÙˆÙ„Ø§ÙŠØ§Øª Ù…ÙˆØ±ÙŠØªØ§Ù†ÙŠØ§</p>
            <div class="mt-4 text-sm text-blue-600">
                <p>Ø¨ÙŠØ§Ù†Ø§Øª Ø±Ø³Ù…ÙŠØ© Ù…Ù† ÙˆØ²Ø§Ø±Ø© Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠØ© Ø§Ù„Ù…ÙˆØ±ÙŠØªØ§Ù†ÙŠØ©</p>
                <p class="text-xs mt-1 text-gray-500">Ø¢Ø®Ø± ØªØ­Ø¯ÙŠØ«: <span id="last-updated">Ø§Ù„ÙŠÙˆÙ… Ø¹Ù„Ù‰ Ø§Ù„Ø³Ø§Ø¹Ø© 10:00</span></p>
            </div>
        </header>
        
        <!-- Main Dashboard -->
        <div class="bg-white rounded-xl shadow-lg overflow-hidden">
            <!-- Tabs Navigation -->
            <div class="flex border-b border-gray-200">
                <button id="tab-48h" class="flex-1 py-4 px-2 text-center font-medium tab-active">
                    <i class="fas fa-clock mr-1"></i> Ø¢Ø®Ø± 48 Ø³Ø§Ø¹Ø©
                </button>
                <button id="tab-week" class="flex-1 py-4 px-2 text-center font-medium text-gray-500 hover:text-blue-800">
                    <i class="fas fa-calendar-week mr-1"></i> Ø®Ù„Ø§Ù„ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹
                </button>
            </div>
            
            <!-- Filters -->
            <div class="p-4 border-b border-gray-200 bg-gray-50">
                <div class="flex flex-wrap gap-4">
                    <div class="flex-1 min-w-[150px]">
                        <label for="region-filter" class="block text-sm font-medium text-gray-700 mb-1">Ø§Ù„ÙˆÙ„Ø§ÙŠØ©</label>
                        <select id="region-filter" class="w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500">
                            <option value="all">Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙˆÙ„Ø§ÙŠØ§Øª</option>
                            <option value="Ù†ÙˆØ§ÙƒØ´ÙˆØ·">Ù†ÙˆØ§ÙƒØ´ÙˆØ·</option>
                            <option value="Ø§Ù„Ø­ÙˆØ¶ Ø§Ù„Ø´Ø±Ù‚ÙŠ">Ø§Ù„Ø­ÙˆØ¶ Ø§Ù„Ø´Ø±Ù‚ÙŠ</option>
                            <option value="Ø§Ù„Ø­ÙˆØ¶ Ø§Ù„ØºØ±Ø¨ÙŠ">Ø§Ù„Ø­ÙˆØ¶ Ø§Ù„ØºØ±Ø¨ÙŠ</option>
                            <option value="Ù„Ø¹ØµØ§Ø¨Ø©">Ù„Ø¹ØµØ§Ø¨Ø©</option>
                            <option value="ÙƒÙˆØ±ÙƒÙˆÙ„">ÙƒÙˆØ±ÙƒÙˆÙ„</option>
                            <option value="Ø§Ù„Ø¨Ø±Ø§ÙƒÙ†Ø©">Ø§Ù„Ø¨Ø±Ø§ÙƒÙ†Ø©</option>
                            <option value="ØªØ±Ø§Ø±Ø²Ø©">ØªØ±Ø§Ø±Ø²Ø©</option>
                            <option value="Ø£Ø¯Ø±Ø§Ø±">Ø£Ø¯Ø±Ø§Ø±</option>
                            <option value="Ø§Ù†ÙˆØ§Ø°ÙŠØ¨Ùˆ">Ø§Ù†ÙˆØ§Ø°ÙŠØ¨Ùˆ</option>
                            <option value="ØªÙŠØ±Ø³ Ø²Ù…ÙˆØ±">ØªÙŠØ±Ø³ Ø²Ù…ÙˆØ±</option>
                            <option value="Ø¥ÙŠÙ†Ø´ÙŠØ±ÙŠ">Ø¥ÙŠÙ†Ø´ÙŠØ±ÙŠ</option>
                            <option value="ØªÙƒØ§Ù†Øª">ØªÙƒØ§Ù†Øª</option>
                            <option value="ÙƒÙŠØ¯ÙŠ Ù…Ø§ØºØ§">ÙƒÙŠØ¯ÙŠ Ù…Ø§ØºØ§</option>
                            <option value="Ø¢Ø¯Ø±Ø§Ø±">Ø¢Ø¯Ø±Ø§Ø±</option>
                        </select>
                    </div>
                    
                    <div class="flex-1 min-w-[150px]">
                        <label for="intensity-filter" class="block text-sm font-medium text-gray-700 mb-1">Ø´Ø¯Ø© Ø§Ù„Ø£Ù…Ø·Ø§Ø±</label>
                        <select id="intensity-filter" class="w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500">
                            <option value="all">Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø³ØªÙˆÙŠØ§Øª</option>
                            <option value="light">Ø®ÙÙŠÙØ© (0-10 Ù…Ù…)</option>
                            <option value="moderate">Ù…ØªÙˆØ³Ø·Ø© (11-30 Ù…Ù…)</option>
                            <option value="heavy">ØºØ²ÙŠØ±Ø© (30+ Ù…Ù…)</option>
                        </select>
                    </div>
                    
                    <div class="flex-1 min-w-[150px]">
                        <label for="sort-by" class="block text-sm font-medium text-gray-700 mb-1">ØªØ±ØªÙŠØ¨ Ø­Ø³Ø¨</label>
                        <select id="sort-by" class="w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500">
                            <option value="recent">Ø§Ù„Ø£Ø­Ø¯Ø«</option>
                            <option value="highest">Ø§Ù„Ø£Ø¹Ù„Ù‰ Ø£Ù…Ø·Ø§Ø±Ø§Ù‹</option>
                            <option value="location">Ø­Ø³Ø¨ Ø§Ù„Ù…ÙˆÙ‚Ø¹</option>
                        </select>
                    </div>
                    
                    <div class="flex items-end">
                        <button id="apply-filters" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md transition-colors">
                            ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ÙÙ„Ø§ØªØ±
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Tab Content - Last 48 Hours -->
            <div id="content-48h" class="p-4">
                <div class="mb-4 flex justify-between items-center">
                    <h2 class="text-xl font-semibold text-blue-900">ØªØ³Ø¬ÙŠÙ„Ø§Øª Ø§Ù„Ø£Ù…Ø·Ø§Ø± Ø®Ù„Ø§Ù„ Ø¢Ø®Ø± 48 Ø³Ø§Ø¹Ø©</h2>
                    <span class="text-sm text-blue-600">Ø¹Ø¯Ø¯ Ø§Ù„Ù†Ù‚Ø§Ø·: <span id="count-48h">12</span></span>
                </div>
                
                <div class="space-y-3 max-h-[500px] overflow-y-auto pr-2" id="rain-list-48h">
                    <!-- Rain entries will be added here by JavaScript -->
                </div>
            </div>
            
            <!-- Tab Content - This Week (hidden by default) -->
            <div id="content-week" class="p-4 hidden">
                <div class="mb-4 flex justify-between items-center">
                    <h2 class="text-xl font-semibold text-blue-900">ØªØ³Ø¬ÙŠÙ„Ø§Øª Ø§Ù„Ø£Ù…Ø·Ø§Ø± Ø®Ù„Ø§Ù„ Ù‡Ø°Ø§ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹</h2>
                    <span class="text-sm text-blue-600">Ø¹Ø¯Ø¯ Ø§Ù„Ù†Ù‚Ø§Ø·: <span id="count-week">42</span></span>
                </div>
                
                <div class="overflow-x-auto">
                    <table class="min-w-full divide-y divide-gray-200">
                        <thead class="bg-gray-50">
                            <tr>
                                <th scope="col" class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">Ø§Ù„ÙˆÙ„Ø§ÙŠØ©</th>
                                <th scope="col" class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©/Ø§Ù„Ù‚Ø±ÙŠØ©</th>
                                <th scope="col" class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">ÙƒÙ…ÙŠØ© Ø§Ù„Ø£Ù…Ø·Ø§Ø± (Ù…Ù…)</th>
                                <th scope="col" class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">Ø§Ù„ØªØ§Ø±ÙŠØ®</th>
                                <th scope="col" class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">Ø§Ù„Ù…Ø³Ø§ÙØ© Ù…Ù† Ù†ÙˆØ§ÙƒØ´ÙˆØ·</th>
                            </tr>
                        </thead>
                        <tbody class="bg-white divide-y divide-gray-200" id="rain-table-week">
                            <!-- Table rows will be added here by JavaScript -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        
        <!-- Map Section -->
        <div class="mt-8 bg-white rounded-xl shadow-lg overflow-hidden">
            <div class="p-4 border-b border-gray-200">
                <h2 class="text-xl font-semibold text-blue-900">Ø®Ø±ÙŠØ·Ø© ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ø£Ù…Ø·Ø§Ø±</h2>
                <p class="text-sm text-gray-600 mt-1">Ø§Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ø£ÙŠ Ø¹Ù„Ø§Ù…Ø© Ù„Ù…Ø¹Ø±ÙØ© Ø§Ù„ØªÙØ§ØµÙŠÙ„</p>
            </div>
            <div class="p-4 h-64 md:h-96 bg-gray-100 flex items-center justify-center">
                <div id="map-placeholder" class="text-center">
                    <i class="fas fa-map-marked-alt text-4xl text-blue-500 mb-2"></i>
                    <p class="text-gray-700">Ø®Ø±ÙŠØ·Ø© ØªÙØ§Ø¹Ù„ÙŠØ© ØªØ¸Ù‡Ø± Ù…ÙˆØ§Ù‚Ø¹ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø£Ù…Ø·Ø§Ø±</p>
                    <p class="text-sm text-gray-500 mt-2">(Ø³ÙŠØªÙ… Ø¯Ù…Ø¬Ù‡Ø§ Ù…Ø¹ Ø®Ø±Ø§Ø¦Ø· Ø¬ÙˆØ¬Ù„ ÙÙŠ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ÙƒØ§Ù…Ù„)</p>
                </div>
            </div>
        </div>
        
        <!-- Footer -->
        <footer class="mt-12 text-center text-sm text-gray-600">
            <p>Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù‚Ø¯Ù…Ø© Ù…Ù† ÙˆØ²Ø§Ø±Ø© Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠØ© Ø§Ù„Ù…ÙˆØ±ÙŠØªØ§Ù†ÙŠØ© - <a href="https://www.interieur.gov.mr/" class="text-blue-600 hover:underline" target="_blank">interieur.gov.mr</a></p>
            <p class="mt-1">Â© 2023 Lekhrive - Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©</p>
        </footer>
    </div>

    <script>
        // Sample data - in a real app, this would come from an API or scraping
        const rainData = [
            { region: "Ù„Ø¹ØµØ§Ø¨Ø©", city: "ÙƒÙŠÙØ©", rainfall_mm: 37.2, date: "2023-07-15", time: "10:00", time_ago: "Ù‚Ø¨Ù„ 12 Ø³Ø§Ø¹Ø©", distance: "3 Ø³Ø§Ø¹Ø§Øª Ùˆ 10 Ø¯Ù‚Ø§Ø¦Ù‚" },
            { region: "Ø§Ù„Ø­ÙˆØ¶ Ø§Ù„Ø´Ø±Ù‚ÙŠ", city: "Ø£ÙŠÙŠÙˆÙ†", rainfall_mm: 25, date: "2023-07-15", time: "02:00", time_ago: "Ù‚Ø¨Ù„ 20 Ø³Ø§Ø¹Ø©", distance: "5 Ø³Ø§Ø¹Ø§Øª Ùˆ 45 Ø¯Ù‚ÙŠÙ‚Ø©" },
            { region: "Ø§Ù„Ø­ÙˆØ¶ Ø§Ù„ØºØ±Ø¨ÙŠ", city: "Ø§Ù„Ù†Ø¹Ù…Ø©", rainfall_mm: 8, date: "2023-07-14", time: "18:00", time_ago: "Ù‚Ø¨Ù„ 40 Ø³Ø§Ø¹Ø©", distance: "7 Ø³Ø§Ø¹Ø§Øª Ùˆ 30 Ø¯Ù‚ÙŠÙ‚Ø©" },
            { region: "Ù†ÙˆØ§ÙƒØ´ÙˆØ·", city: "ØªÙØ±Øº Ø²ÙŠÙ†Ø©", rainfall_mm: 15.5, date: "2023-07-15", time: "08:30", time_ago: "Ù‚Ø¨Ù„ 14 Ø³Ø§Ø¹Ø©", distance: "20 Ø¯Ù‚ÙŠÙ‚Ø©" },
            { region: "Ø¢Ø¯Ø±Ø§Ø±", city: "Ø£Ø·Ø§Ø±", rainfall_mm: 42.8, date: "2023-07-14", time: "12:00", time_ago: "Ù‚Ø¨Ù„ 44 Ø³Ø§Ø¹Ø©", distance: "4 Ø³Ø§Ø¹Ø§Øª Ùˆ 15 Ø¯Ù‚ÙŠÙ‚Ø©" },
            { region: "ØªØ±Ø§Ø±Ø²Ø©", city: "Ø±ÙˆØµÙˆ", rainfall_mm: 30.1, date: "2023-07-15", time: "06:00", time_ago: "Ù‚Ø¨Ù„ 16 Ø³Ø§Ø¹Ø©", distance: "2 Ø³Ø§Ø¹Ø§Øª Ùˆ 50 Ø¯Ù‚ÙŠÙ‚Ø©" },
            { region: "Ù„Ø¹ØµØ§Ø¨Ø©", city: "Ø¨ÙˆÙ…Ø¯ÙŠØ¯", rainfall_mm: 12.3, date: "2023-07-14", time: "22:00", time_ago: "Ù‚Ø¨Ù„ 36 Ø³Ø§Ø¹Ø©", distance: "3 Ø³Ø§Ø¹Ø§Øª Ùˆ 40 Ø¯Ù‚ÙŠÙ‚Ø©" },
            { region: "ÙƒÙˆØ±ÙƒÙˆÙ„", city: "ÙƒÙŠÙ‡ÙŠØ¯ÙŠ", rainfall_mm: 5.7, date: "2023-07-14", time: "16:00", time_ago: "Ù‚Ø¨Ù„ 42 Ø³Ø§Ø¹Ø©", distance: "6 Ø³Ø§Ø¹Ø§Øª" },
            { region: "Ø§Ù„Ø­ÙˆØ¶ Ø§Ù„Ø´Ø±Ù‚ÙŠ", city: "Ø§Ù„Ù†Ø¹Ù…Ø©", rainfall_mm: 18.9, date: "2023-07-15", time: "04:00", time_ago: "Ù‚Ø¨Ù„ 18 Ø³Ø§Ø¹Ø©", distance: "5 Ø³Ø§Ø¹Ø§Øª Ùˆ 45 Ø¯Ù‚ÙŠÙ‚Ø©" },
            { region: "ØªÙƒØ§Ù†Øª", city: "ØªØ¬ÙƒØ¬Ø©", rainfall_mm: 22.4, date: "2023-07-15", time: "00:00", time_ago: "Ù‚Ø¨Ù„ 22 Ø³Ø§Ø¹Ø©", distance: "4 Ø³Ø§Ø¹Ø§Øª Ùˆ 30 Ø¯Ù‚ÙŠÙ‚Ø©" },
            { region: "Ø¥ÙŠÙ†Ø´ÙŠØ±ÙŠ", city: "Ø£ÙƒØ¬ÙˆØ¬Øª", rainfall_mm: 9.1, date: "2023-07-14", time: "14:00", time_ago: "Ù‚Ø¨Ù„ 38 Ø³Ø§Ø¹Ø©", distance: "3 Ø³Ø§Ø¹Ø§Øª Ùˆ 15 Ø¯Ù‚ÙŠÙ‚Ø©" },
            { region: "Ù†ÙˆØ§ÙƒØ´ÙˆØ·", city: "Ù„ÙƒØµØ±", rainfall_mm: 11.2, date: "2023-07-15", time: "09:00", time_ago: "Ù‚Ø¨Ù„ 13 Ø³Ø§Ø¹Ø©", distance: "10 Ø¯Ù‚Ø§Ø¦Ù‚" }
        ];

        // Generate weekly data (same format but more entries)
        const weeklyData = [...rainData];
        for (let i = 0; i < 30; i++) {
            const regions = ["Ù†ÙˆØ§ÙƒØ´ÙˆØ·", "Ø§Ù„Ø­ÙˆØ¶ Ø§Ù„Ø´Ø±Ù‚ÙŠ", "Ø§Ù„Ø­ÙˆØ¶ Ø§Ù„ØºØ±Ø¨ÙŠ", "Ù„Ø¹ØµØ§Ø¨Ø©", "ÙƒÙˆØ±ÙƒÙˆÙ„", "Ø§Ù„Ø¨Ø±Ø§ÙƒÙ†Ø©", "ØªØ±Ø§Ø±Ø²Ø©", "Ø£Ø¯Ø±Ø§Ø±", "Ø§Ù†ÙˆØ§Ø°ÙŠØ¨Ùˆ", "ØªÙŠØ±Ø³ Ø²Ù…ÙˆØ±", "Ø¥ÙŠÙ†Ø´ÙŠØ±ÙŠ", "ØªÙƒØ§Ù†Øª", "ÙƒÙŠØ¯ÙŠ Ù…Ø§ØºØ§", "Ø¢Ø¯Ø±Ø§Ø±"];
            const cities = ["ÙƒÙŠÙØ©", "Ø£ÙŠÙŠÙˆÙ†", "Ø§Ù„Ù†Ø¹Ù…Ø©", "ØªÙØ±Øº Ø²ÙŠÙ†Ø©", "Ø£Ø·Ø§Ø±", "Ø±ÙˆØµÙˆ", "Ø¨ÙˆÙ…Ø¯ÙŠØ¯", "ÙƒÙŠÙ‡ÙŠØ¯ÙŠ", "ØªØ¬ÙƒØ¬Ø©", "Ø£ÙƒØ¬ÙˆØ¬Øª", "Ù„ÙƒØµØ±", "Ø§Ù„Ù…Ø°Ø±Ø°Ø±Ø©", "Ø¨ÙˆØªÙ„Ù…ÙŠØª", "Ø£Ù„Ø§Ùƒ", "Ø¨Ø§Ø¨Ø§Ø¨Ù‰", "ÙƒØ±Ùˆ", "ØªÙ…Ø¨Ø¯ØºØ©", "ÙˆØ§Ø¯ Ø§Ù„Ù†Ø§Ù‚Ø©"];
            
            const randomRegion = regions[Math.floor(Math.random() * regions.length)];
            const randomCity = cities[Math.floor(Math.random() * cities.length)];
            const randomRainfall = (Math.random() * 50).toFixed(1);
            
            // Random date in the past 7 days
            const randomDay = Math.floor(Math.random() * 7);
            const date = new Date();
            date.setDate(date.getDate() - randomDay);
            const dateStr = date.toISOString().split('T')[0];
            
            // Random time
            const hours = Math.floor(Math.random() * 24).toString().padStart(2, '0');
            const minutes = Math.floor(Math.random() * 60).toString().padStart(2, '0');
            const time = `${hours}:${minutes}`;
            
            // Time ago text
            const timeAgoText = randomDay === 0 ? "Ø§Ù„ÙŠÙˆÙ…" : 
                               randomDay === 1 ? "Ø¨Ø§Ù„Ø£Ù…Ø³" : 
                               `Ù‚Ø¨Ù„ ${randomDay} Ø£ÙŠØ§Ù…`;
            
            // Random distance
            const distanceHours = Math.floor(Math.random() * 8);
            const distanceMins = Math.floor(Math.random() * 60);
            const distanceText = distanceHours > 0 ? 
                               `${distanceHours} Ø³Ø§Ø¹Ø©${distanceHours > 1 ? 'Ø§Øª' : ''} Ùˆ ${distanceMins} Ø¯Ù‚ÙŠÙ‚Ø©${distanceMins !== 1 ? 'Ø§Øª' : ''}` : 
                               `${distanceMins} Ø¯Ù‚ÙŠÙ‚Ø©${distanceMins !== 1 ? 'Ø§Øª' : ''}`;
            
            weeklyData.push({
                region: randomRegion,
                city: randomCity,
                rainfall_mm: parseFloat(randomRainfall),
                date: dateStr,
                time: time,
                time_ago: timeAgoText,
                distance: distanceText
            });
        }

        // Function to get rain intensity class
        function getRainIntensity(amount) {
            if (amount <= 10) return { class: "light", icon: "â˜ï¸", name: "Ø®ÙÙŠÙØ©" };
            if (amount <= 30) return { class: "moderate", icon: "ğŸŒ¦ï¸", name: "Ù…ØªÙˆØ³Ø·Ø©" };
            return { class: "heavy", icon: "ğŸŒ§ï¸", name: "ØºØ²ÙŠØ±Ø©" };
        }

        // Function to render 48h rain entries
        function render48hRainEntries(data) {
            const container = document.getElementById('rain-list-48h');
            container.innerHTML = '';
            
            data.forEach(item => {
                const intensity = getRainIntensity(item.rainfall_mm);
                
                const entry = document.createElement('div');
                entry.className = `rain-entry p-3 rounded-lg flex items-center justify-between rain-intensity-${intensity.class}`;
                
                entry.innerHTML = `
                    <div class="flex items-center">
                        <span class="text-xl mr-3">${intensity.icon}</span>
                        <div>
                            <h3 class="font-medium">${item.city} - ${item.region}</h3>
                            <p class="text-sm text-gray-600">${item.time_ago} â€¢ ${item.date} ${item.time}</p>
                        </div>
                    </div>
                    <div class="text-right">
                        <span class="block font-bold text-lg ltr">${item.rainfall_mm} Ù…Ù…</span>
                        <span class="text-xs text-gray-600">${intensity.name}</span>
                    </div>
                `;
                
                container.appendChild(entry);
            });
            
            document.getElementById('count-48h').textContent = data.length;
        }

        // Function to render weekly rain entries
        function renderWeeklyRainEntries(data) {
            const container = document.getElementById('rain-table-week');
            container.innerHTML = '';
            
            data.forEach(item => {
                const intensity = getRainIntensity(item.rainfall_mm);
                
                const row = document.createElement('tr');
                row.className = `rain-entry hover:bg-gray-50`;
                
                row.innerHTML = `
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">${item.region}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                        <span class="font-medium">${item.city}</span>
                        <span class="ml-2">${intensity.icon}</span>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500 ltr">
                        <span class="font-bold">${item.rainfall_mm} Ù…Ù…</span>
                        <span class="text-xs text-gray-400">(${intensity.name})</span>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${item.date} ${item.time}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${item.distance}</td>
                `;
                
                container.appendChild(row);
            });
            
            document.getElementById('count-week').textContent = data.length;
        }

        // Tab switching functionality
        document.getElementById('tab-48h').addEventListener('click', function() {
            this.classList.add('tab-active');
            this.classList.remove('text-gray-500');
            document.getElementById('tab-week').classList.remove('tab-active');
            document.getElementById('tab-week').classList.add('text-gray-500');
            
            document.getElementById('content-48h').classList.remove('hidden');
            document.getElementById('content-week').classList.add('hidden');
        });

        document.getElementById('tab-week').addEventListener('click', function() {
            this.classList.add('tab-active');
            this.classList.remove('text-gray-500');
            document.getElementById('tab-48h').classList.remove('tab-active');
            document.getElementById('tab-48h').classList.add('text-gray-500');
            
            document.getElementById('content-week').classList.remove('hidden');
            document.getElementById('content-48h').classList.add('hidden');
        });

        // Filter functionality
        document.getElementById('apply-filters').addEventListener('click', function() {
            const regionFilter = document.getElementById('region-filter').value;
            const intensityFilter = document.getElementById('intensity-filter').value;
            const sortBy = document.getElementById('sort-by').value;
            
            // Filter 48h data
            let filtered48h = rainData.filter(item => {
                const matchesRegion = regionFilter === 'all' || item.region === regionFilter;
                const intensity = getRainIntensity(item.rainfall_mm).class;
                const matchesIntensity = intensityFilter === 'all' || intensity === intensityFilter;
                return matchesRegion && matchesIntensity;
            });
            
            // Filter weekly data
            let filteredWeekly = weeklyData.filter(item => {
                const matchesRegion = regionFilter === 'all' || item.region === regionFilter;
                const intensity = getRainIntensity(item.rainfall_mm).class;
                const matchesIntensity = intensityFilter === 'all' || intensity === intensityFilter;
                return matchesRegion && matchesIntensity;
            });
            
            // Sort data
            if (sortBy === 'recent') {
                filtered48h.sort((a, b) => new Date(b.date + ' ' + b.time) - new Date(a.date + ' ' + a.time));
                filteredWeekly.sort((a, b) => new Date(b.date + ' ' + b.time) - new Date(a.date + ' ' + a.time));
            } else if (sortBy === 'highest') {
                filtered48h.sort((a, b) => b.rainfall_mm - a.rainfall_mm);
                filteredWeekly.sort((a, b) => b.rainfall_mm - a.rainfall_mm);
            } else if (sortBy === 'location') {
                filtered48h.sort((a, b) => a.city.localeCompare(b.city));
                filteredWeekly.sort((a, b) => a.city.localeCompare(b.city));
            }
            
            // Render filtered data
            render48hRainEntries(filtered48h);
            renderWeeklyRainEntries(filteredWeekly);
        });

        // Initial render
        render48hRainEntries(rainData);
        renderWeeklyRainEntries(weeklyData);

        // Simulate data update
        setInterval(() => {
            const now = new Date();
            const options = { hour: '2-digit', minute: '2-digit' };
            const timeStr = now.toLocaleTimeString('ar-MR', options);
            document.getElementById('last-updated').textContent = `Ø§Ù„ÙŠÙˆÙ… Ø¹Ù„Ù‰ Ø§Ù„Ø³Ø§Ø¹Ø© ${timeStr}`;
        }, 60000);
    </script>
<p style="border-radius: 8px; text-align: center; font-size: 12px; color: #fff; margin-top: 16px;position: fixed; left: 8px; bottom: 8px; z-index: 10; background: rgba(0, 0, 0, 0.8); padding: 4px 8px;">Made with <img src="https://enzostvs-deepsite.hf.space/logo.svg" alt="DeepSite Logo" style="width: 16px; height: 16px; vertical-align: middle;display:inline-block;margin-right:3px;filter:brightness(0) invert(1);"><a href="https://enzostvs-deepsite.hf.space" style="color: #fff;text-decoration: underline;" target="_blank" >DeepSite</a> - ğŸ§¬ <a href="https://enzostvs-deepsite.hf.space?remix=dedesidivall/lekhrive" style="color: #fff;text-decoration: underline;" target="_blank" >Remix</a></p></body>
</html>