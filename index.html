<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lekhrive - ูุชุงุจุนุฉ ุงูุฃูุทุงุฑ ูู ููุฑูุชุงููุง</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700&display=swap');
        
        body {
            font-family: 'Tajawal', sans-serif;
            background-color: #f0f9ff;
        }
        
        .rain-intensity-light {
            background-color: #e0f2fe;
            border-left: 4px solid #38bdf8;
        }
        
        .rain-intensity-moderate {
            background-color: #bae6fd;
            border-left: 4px solid #0ea5e9;
        }
        
        .rain-intensity-heavy {
            background-color: #7dd3fc;
            border-left: 4px solid #0369a1;
        }
        
        .tab-active {
            border-bottom: 3px solid #0369a1;
            color: #0369a1;
            font-weight: bold;
        }
        
        /* For LTR elements like numbers */
        .ltr {
            direction: ltr;
            unicode-bidi: embed;
        }
        
        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }
        
        ::-webkit-scrollbar-thumb {
            background: #0369a1;
            border-radius: 4px;
        }
        
        /* Animation for rain entries */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .rain-entry {
            animation: fadeIn 0.3s ease-out forwards;
        }
    </style>
</head>
<body class="min-h-screen">
    <div class="container mx-auto px-4 py-8">
        <!-- Header -->
        <header class="mb-8 text-center">
            <h1 class="text-3xl md:text-4xl font-bold text-blue-900 mb-2">๐ง๏ธ Lekhrive</h1>
            <p class="text-lg text-blue-700">ูุชุงุจุนุฉ ุงูุฃูุทุงุฑ ูู ูุฎุชูู ููุงูุงุช ููุฑูุชุงููุง</p>
            <div class="mt-4 text-sm text-blue-600">
                <p>ุจูุงูุงุช ุฑุณููุฉ ูู ูุฒุงุฑุฉ ุงูุฏุงุฎููุฉ ุงูููุฑูุชุงููุฉ</p>
                <p class="text-xs mt-1 text-gray-500">ุขุฎุฑ ุชุญุฏูุซ: <span id="last-updated">ุงูููู ุนูู ุงูุณุงุนุฉ 10:00</span></p>
            </div>
        </header>
        
        <!-- Main Dashboard -->
        <div class="bg-white rounded-xl shadow-lg overflow-hidden">
            <!-- Tabs Navigation -->
            <div class="flex border-b border-gray-200">
                <button id="tab-48h" class="flex-1 py-4 px-2 text-center font-medium tab-active">
                    <i class="fas fa-clock mr-1"></i> ุขุฎุฑ 48 ุณุงุนุฉ
                </button>
                <button id="tab-week" class="flex-1 py-4 px-2 text-center font-medium text-gray-500 hover:text-blue-800">
                    <i class="fas fa-calendar-week mr-1"></i> ุฎูุงู ุงูุฃุณุจูุน
                </button>
            </div>
            
            <!-- Filters -->
            <div class="p-4 border-b border-gray-200 bg-gray-50">
                <div class="flex flex-wrap gap-4">
                    <div class="flex-1 min-w-[150px]">
                        <label for="region-filter" class="block text-sm font-medium text-gray-700 mb-1">ุงูููุงูุฉ</label>
                        <select id="region-filter" class="w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500">
                            <option value="all">ุฌููุน ุงูููุงูุงุช</option>
                            <option value="ููุงูุดูุท">ููุงูุดูุท</option>
                            <option value="ุงูุญูุถ ุงูุดุฑูู">ุงูุญูุถ ุงูุดุฑูู</option>
                            <option value="ุงูุญูุถ ุงูุบุฑุจู">ุงูุญูุถ ุงูุบุฑุจู</option>
                            <option value="ูุนุตุงุจุฉ">ูุนุตุงุจุฉ</option>
                            <option value="ููุฑููู">ููุฑููู</option>
                            <option value="ุงูุจุฑุงููุฉ">ุงูุจุฑุงููุฉ</option>
                            <option value="ุชุฑุงุฑุฒุฉ">ุชุฑุงุฑุฒุฉ</option>
                            <option value="ุฃุฏุฑุงุฑ">ุฃุฏุฑุงุฑ</option>
                            <option value="ุงููุงุฐูุจู">ุงููุงุฐูุจู</option>
                            <option value="ุชูุฑุณ ุฒููุฑ">ุชูุฑุณ ุฒููุฑ</option>
                            <option value="ุฅููุดูุฑู">ุฅููุดูุฑู</option>
                            <option value="ุชูุงูุช">ุชูุงูุช</option>
                            <option value="ููุฏู ูุงุบุง">ููุฏู ูุงุบุง</option>
                            <option value="ุขุฏุฑุงุฑ">ุขุฏุฑุงุฑ</option>
                        </select>
                    </div>
                    
                    <div class="flex-1 min-w-[150px]">
                        <label for="intensity-filter" class="block text-sm font-medium text-gray-700 mb-1">ุดุฏุฉ ุงูุฃูุทุงุฑ</label>
                        <select id="intensity-filter" class="w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500">
                            <option value="all">ุฌููุน ุงููุณุชููุงุช</option>
                            <option value="light">ุฎูููุฉ (0-10 ูู)</option>
                            <option value="moderate">ูุชูุณุทุฉ (11-30 ูู)</option>
                            <option value="heavy">ุบุฒูุฑุฉ (30+ ูู)</option>
                        </select>
                    </div>
                    
                    <div class="flex-1 min-w-[150px]">
                        <label for="sort-by" class="block text-sm font-medium text-gray-700 mb-1">ุชุฑุชูุจ ุญุณุจ</label>
                        <select id="sort-by" class="w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500">
                            <option value="recent">ุงูุฃุญุฏุซ</option>
                            <option value="highest">ุงูุฃุนูู ุฃูุทุงุฑุงู</option>
                            <option value="location">ุญุณุจ ุงููููุน</option>
                        </select>
                    </div>
                    
                    <div class="flex items-end">
                        <button id="apply-filters" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md transition-colors">
                            ุชุทุจูู ุงูููุงุชุฑ
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Tab Content - Last 48 Hours -->
            <div id="content-48h" class="p-4">
                <div class="mb-4 flex justify-between items-center">
                    <h2 class="text-xl font-semibold text-blue-900">ุชุณุฌููุงุช ุงูุฃูุทุงุฑ ุฎูุงู ุขุฎุฑ 48 ุณุงุนุฉ</h2>
                    <span class="text-sm text-blue-600">ุนุฏุฏ ุงูููุงุท: <span id="count-48h">12</span></span>
                </div>
                
                <div class="space-y-3 max-h-[500px] overflow-y-auto pr-2" id="rain-list-48h">
                    <!-- Rain entries will be added here by JavaScript -->
                </div>
            </div>
            
            <!-- Tab Content - This Week (hidden by default) -->
            <div id="content-week" class="p-4 hidden">
                <div class="mb-4 flex justify-between items-center">
                    <h2 class="text-xl font-semibold text-blue-900">ุชุณุฌููุงุช ุงูุฃูุทุงุฑ ุฎูุงู ูุฐุง ุงูุฃุณุจูุน</h2>
                    <span class="text-sm text-blue-600">ุนุฏุฏ ุงูููุงุท: <span id="count-week">42</span></span>
                </div>
                
                <div class="overflow-x-auto">
                    <table class="min-w-full divide-y divide-gray-200">
                        <thead class="bg-gray-50">
                            <tr>
                                <th scope="col" class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">ุงูููุงูุฉ</th>
                                <th scope="col" class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">ุงููุฏููุฉ/ุงููุฑูุฉ</th>
                                <th scope="col" class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">ูููุฉ ุงูุฃูุทุงุฑ (ูู)</th>
                                <th scope="col" class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">ุงูุชุงุฑูุฎ</th>
                                <th scope="col" class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">ุงููุณุงูุฉ ูู ููุงูุดูุท</th>
                            </tr>
                        </thead>
                        <tbody class="bg-white divide-y divide-gray-200" id="rain-table-week">
                            <!-- Table rows will be added here by JavaScript -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        
        <!-- Map Section -->
        <div class="mt-8 bg-white rounded-xl shadow-lg overflow-hidden">
            <div class="p-4 border-b border-gray-200">
                <h2 class="text-xl font-semibold text-blue-900">ุฎุฑูุทุฉ ุชูุฒูุน ุงูุฃูุทุงุฑ</h2>
                <p class="text-sm text-gray-600 mt-1">ุงููุฑ ุนูู ุฃู ุนูุงูุฉ ููุนุฑูุฉ ุงูุชูุงุตูู</p>
            </div>
            <div class="p-4 h-64 md:h-96 bg-gray-100 flex items-center justify-center">
                <div id="map-placeholder" class="text-center">
                    <i class="fas fa-map-marked-alt text-4xl text-blue-500 mb-2"></i>
                    <p class="text-gray-700">ุฎุฑูุทุฉ ุชูุงุนููุฉ ุชุธูุฑ ููุงูุน ุชุณุฌูู ุงูุฃูุทุงุฑ</p>
                    <p class="text-sm text-gray-500 mt-2">(ุณูุชู ุฏูุฌูุง ูุน ุฎุฑุงุฆุท ุฌูุฌู ูู ุงูุชุทุจูู ุงููุงูู)</p>
                </div>
            </div>
        </div>
        
        <!-- Footer -->
        <footer class="mt-12 text-center text-sm text-gray-600">
            <p>ุจูุงูุงุช ููุฏูุฉ ูู ูุฒุงุฑุฉ ุงูุฏุงุฎููุฉ ุงูููุฑูุชุงููุฉ - <a href="https://www.interieur.gov.mr/" class="text-blue-600 hover:underline" target="_blank">interieur.gov.mr</a></p>
            <p class="mt-1">ยฉ 2023 Lekhrive - ุฌููุน ุงูุญููู ูุญููุธุฉ</p>
        </footer>
    </div>

    <script>
        // Sample data - in a real app, this would come from an API or scraping
        const rainData = [
            { region: "ูุนุตุงุจุฉ", city: "ูููุฉ", rainfall_mm: 37.2, date: "2023-07-15", time: "10:00", time_ago: "ูุจู 12 ุณุงุนุฉ", distance: "3 ุณุงุนุงุช ู 10 ุฏูุงุฆู" },
            { region: "ุงูุญูุถ ุงูุดุฑูู", city: "ุฃูููู", rainfall_mm: 25, date: "2023-07-15", time: "02:00", time_ago: "ูุจู 20 ุณุงุนุฉ", distance: "5 ุณุงุนุงุช ู 45 ุฏูููุฉ" },
            { region: "ุงูุญูุถ ุงูุบุฑุจู", city: "ุงููุนูุฉ", rainfall_mm: 8, date: "2023-07-14", time: "18:00", time_ago: "ูุจู 40 ุณุงุนุฉ", distance: "7 ุณุงุนุงุช ู 30 ุฏูููุฉ" },
            { region: "ููุงูุดูุท", city: "ุชูุฑุบ ุฒููุฉ", rainfall_mm: 15.5, date: "2023-07-15", time: "08:30", time_ago: "ูุจู 14 ุณุงุนุฉ", distance: "20 ุฏูููุฉ" },
            { region: "ุขุฏุฑุงุฑ", city: "ุฃุทุงุฑ", rainfall_mm: 42.8, date: "2023-07-14", time: "12:00", time_ago: "ูุจู 44 ุณุงุนุฉ", distance: "4 ุณุงุนุงุช ู 15 ุฏูููุฉ" },
            { region: "ุชุฑุงุฑุฒุฉ", city: "ุฑูุตู", rainfall_mm: 30.1, date: "2023-07-15", time: "06:00", time_ago: "ูุจู 16 ุณุงุนุฉ", distance: "2 ุณุงุนุงุช ู 50 ุฏูููุฉ" },
            { region: "ูุนุตุงุจุฉ", city: "ุจููุฏูุฏ", rainfall_mm: 12.3, date: "2023-07-14", time: "22:00", time_ago: "ูุจู 36 ุณุงุนุฉ", distance: "3 ุณุงุนุงุช ู 40 ุฏูููุฉ" },
            { region: "ููุฑููู", city: "ููููุฏู", rainfall_mm: 5.7, date: "2023-07-14", time: "16:00", time_ago: "ูุจู 42 ุณุงุนุฉ", distance: "6 ุณุงุนุงุช" },
            { region: "ุงูุญูุถ ุงูุดุฑูู", city: "ุงููุนูุฉ", rainfall_mm: 18.9, date: "2023-07-15", time: "04:00", time_ago: "ูุจู 18 ุณุงุนุฉ", distance: "5 ุณุงุนุงุช ู 45 ุฏูููุฉ" },
            { region: "ุชูุงูุช", city: "ุชุฌูุฌุฉ", rainfall_mm: 22.4, date: "2023-07-15", time: "00:00", time_ago: "ูุจู 22 ุณุงุนุฉ", distance: "4 ุณุงุนุงุช ู 30 ุฏูููุฉ" },
            { region: "ุฅููุดูุฑู", city: "ุฃูุฌูุฌุช", rainfall_mm: 9.1, date: "2023-07-14", time: "14:00", time_ago: "ูุจู 38 ุณุงุนุฉ", distance: "3 ุณุงุนุงุช ู 15 ุฏูููุฉ" },
            { region: "ููุงูุดูุท", city: "ููุตุฑ", rainfall_mm: 11.2, date: "2023-07-15", time: "09:00", time_ago: "ูุจู 13 ุณุงุนุฉ", distance: "10 ุฏูุงุฆู" }
        ];

        // Generate weekly data (same format but more entries)
        const weeklyData = [...rainData];
        for (let i = 0; i < 30; i++) {
            const regions = ["ููุงูุดูุท", "ุงูุญูุถ ุงูุดุฑูู", "ุงูุญูุถ ุงูุบุฑุจู", "ูุนุตุงุจุฉ", "ููุฑููู", "ุงูุจุฑุงููุฉ", "ุชุฑุงุฑุฒุฉ", "ุฃุฏุฑุงุฑ", "ุงููุงุฐูุจู", "ุชูุฑุณ ุฒููุฑ", "ุฅููุดูุฑู", "ุชูุงูุช", "ููุฏู ูุงุบุง", "ุขุฏุฑุงุฑ"];
            const cities = ["ูููุฉ", "ุฃูููู", "ุงููุนูุฉ", "ุชูุฑุบ ุฒููุฉ", "ุฃุทุงุฑ", "ุฑูุตู", "ุจููุฏูุฏ", "ููููุฏู", "ุชุฌูุฌุฉ", "ุฃูุฌูุฌุช", "ููุตุฑ", "ุงููุฐุฑุฐุฑุฉ", "ุจูุชูููุช", "ุฃูุงู", "ุจุงุจุงุจู", "ูุฑู", "ุชูุจุฏุบุฉ", "ูุงุฏ ุงููุงูุฉ"];
            
            const randomRegion = regions[Math.floor(Math.random() * regions.length)];
            const randomCity = cities[Math.floor(Math.random() * cities.length)];
            const randomRainfall = (Math.random() * 50).toFixed(1);
            
            // Random date in the past 7 days
            const randomDay = Math.floor(Math.random() * 7);
            const date = new Date();
            date.setDate(date.getDate() - randomDay);
            const dateStr = date.toISOString().split('T')[0];
            
            // Random time
            const hours = Math.floor(Math.random() * 24).toString().padStart(2, '0');
            const minutes = Math.floor(Math.random() * 60).toString().padStart(2, '0');
            const time = `${hours}:${minutes}`;
            
            // Time ago text
            const timeAgoText = randomDay === 0 ? "ุงูููู" : 
                               randomDay === 1 ? "ุจุงูุฃูุณ" : 
                               `ูุจู ${randomDay} ุฃูุงู`;
            
            // Random distance
            const distanceHours = Math.floor(Math.random() * 8);
            const distanceMins = Math.floor(Math.random() * 60);
            const distanceText = distanceHours > 0 ? 
                               `${distanceHours} ุณุงุนุฉ${distanceHours > 1 ? 'ุงุช' : ''} ู ${distanceMins} ุฏูููุฉ${distanceMins !== 1 ? 'ุงุช' : ''}` : 
                               `${distanceMins} ุฏูููุฉ${distanceMins !== 1 ? 'ุงุช' : ''}`;
            
            weeklyData.push({
                region: randomRegion,
                city: randomCity,
                rainfall_mm: parseFloat(randomRainfall),
                date: dateStr,
                time: time,
                time_ago: timeAgoText,
                distance: distanceText
            });
        }

        // Function to get rain intensity class
        function getRainIntensity(amount) {
            if (amount <= 10) return { class: "light", icon: "โ๏ธ", name: "ุฎูููุฉ" };
            if (amount <= 30) return { class: "moderate", icon: "๐ฆ๏ธ", name: "ูุชูุณุทุฉ" };
            return { class: "heavy", icon: "๐ง๏ธ", name: "ุบุฒูุฑุฉ" };
        }

        // Function to render 48h rain entries
        function render48hRainEntries(data) {
            const container = document.getElementById('rain-list-48h');
            container.innerHTML = '';
            
            data.forEach(item => {
                const intensity = getRainIntensity(item.rainfall_mm);
                
                const entry = document.createElement('div');
                entry.className = `rain-entry p-3 rounded-lg flex items-center justify-between rain-intensity-${intensity.class}`;
                
                entry.innerHTML = `
                    <div class="flex items-center">
                        <span class="text-xl mr-3">${intensity.icon}</span>
                        <div>
                            <h3 class="font-medium">${item.city} - ${item.region}</h3>
                            <p class="text-sm text-gray-600">${item.time_ago} โข ${item.date} ${item.time}</p>
                        </div>
                    </div>
                    <div class="text-right">
                        <span class="block font-bold text-lg ltr">${item.rainfall_mm} ูู</span>
                        <span class="text-xs text-gray-600">${intensity.name}</span>
                    </div>
                `;
                
                container.appendChild(entry);
            });
            
            document.getElementById('count-48h').textContent = data.length;
        }

        // Function to render weekly rain entries
        function renderWeeklyRainEntries(data) {
            const container = document.getElementById('rain-table-week');
            container.innerHTML = '';
            
            data.forEach(item => {
                const intensity = getRainIntensity(item.rainfall_mm);
                
                const row = document.createElement('tr');
                row.className = `rain-entry hover:bg-gray-50`;
                
                row.innerHTML = `
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">${item.region}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                        <span class="font-medium">${item.city}</span>
                        <span class="ml-2">${intensity.icon}</span>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500 ltr">
                        <span class="font-bold">${item.rainfall_mm} ูู</span>
                        <span class="text-xs text-gray-400">(${intensity.name})</span>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${item.date} ${item.time}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${item.distance}</td>
                `;
                
                container.appendChild(row);
            });
            
            document.getElementById('count-week').textContent = data.length;
        }

        // Tab switching functionality
        document.getElementById('tab-48h').addEventListener('click', function() {
            this.classList.add('tab-active');
            this.classList.remove('text-gray-500');
            document.getElementById('tab-week').classList.remove('tab-active');
            document.getElementById('tab-week').classList.add('text-gray-500');
            
            document.getElementById('content-48h').classList.remove('hidden');
            document.getElementById('content-week').classList.add('hidden');
        });

        document.getElementById('tab-week').addEventListener('click', function() {
            this.classList.add('tab-active');
            this.classList.remove('text-gray-500');
            document.getElementById('tab-48h').classList.remove('tab-active');
            document.getElementById('tab-48h').classList.add('text-gray-500');
            
            document.getElementById('content-week').classList.remove('hidden');
            document.getElementById('content-48h').classList.add('hidden');
        });

        // Filter functionality
        document.getElementById('apply-filters').addEventListener('click', function() {
            const regionFilter = document.getElementById('region-filter').value;
            const intensityFilter = document.getElementById('intensity-filter').value;
            const sortBy = document.getElementById('sort-by').value;
            
            // Filter 48h data
            let filtered48h = rainData.filter(item => {
                const matchesRegion = regionFilter === 'all' || item.region === regionFilter;
                const intensity = getRainIntensity(item.rainfall_mm).class;
                const matchesIntensity = intensityFilter === 'all' || intensity === intensityFilter;
                return matchesRegion && matchesIntensity;
            });
            
            // Filter weekly data
            let filteredWeekly = weeklyData.filter(item => {
                const matchesRegion = regionFilter === 'all' || item.region === regionFilter;
                const intensity = getRainIntensity(item.rainfall_mm).class;
                const matchesIntensity = intensityFilter === 'all' || intensity === intensityFilter;
                return matchesRegion && matchesIntensity;
            });
            
            // Sort data
            if (sortBy === 'recent') {
                filtered48h.sort((a, b) => new Date(b.date + ' ' + b.time) - new Date(a.date + ' ' + a.time));
                filteredWeekly.sort((a, b) => new Date(b.date + ' ' + b.time) - new Date(a.date + ' ' + a.time));
            } else if (sortBy === 'highest') {
                filtered48h.sort((a, b) => b.rainfall_mm - a.rainfall_mm);
                filteredWeekly.sort((a, b) => b.rainfall_mm - a.rainfall_mm);
            } else if (sortBy === 'location') {
                filtered48h.sort((a, b) => a.city.localeCompare(b.city));
                filteredWeekly.sort((a, b) => a.city.localeCompare(b.city));
            }
            
            // Render filtered data
            render48hRainEntries(filtered48h);
            renderWeeklyRainEntries(filteredWeekly);
        });

        // Initial render
        render48hRainEntries(rainData);
        renderWeeklyRainEntries(weeklyData);

        // Simulate data update
        setInterval(() => {
            const now = new Date();
            const options = { hour: '2-digit', minute: '2-digit' };
            const timeStr = now.toLocaleTimeString('ar-MR', options);
            document.getElementById('last-updated').textContent = `ุงูููู ุนูู ุงูุณุงุนุฉ ${timeStr}`;
        }, 60000);
    </script>
<p style="border-radius: 8px; text-align: center; font-size: 12px; color: #fff; margin-top: 16px;position: fixed; left: 8px; bottom: 8px; z-index: 10; background: rgba(0, 0, 0, 0.8); padding: 4px 8px;">Made with <img src="https://enzostvs-deepsite.hf.space/logo.svg" alt="DeepSite Logo" style="width: 16px; height: 16px; vertical-align: middle;display:inline-block;margin-right:3px;filter:brightness(0) invert(1);"><a href="https://enzostvs-deepsite.hf.space" style="color: #fff;text-decoration: underline;" target="_blank" >DeepSite</a> - ๐งฌ <a href="https://enzostvs-deepsite.hf.space?remix=dedesidivall/lekhrive" style="color: #fff;text-decoration: underline;" target="_blank" >Remix</a></p></body>
</html>